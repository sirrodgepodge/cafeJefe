/*! cafeJefe 2015-07-14 */
var $purchaseToggle=$(".purchase-toggle"),$coffeeInd=$(".coffee-ind"),$buyBtn=$(".buy-btn"),$coffeePrice=$(".coffee-price"),$merchPrice=$(".merch-price"),$backToTop=$(".back-to-top, .title, .footer-logo"),$title=$(".title"),$contact=$(".contact"),$placeHolder=$(".place-holder"),$landingHead=$(".landing-head"),$landingNotHead=$(".landing-not-head"),$landingTogglers=$(".dream, .product"),$downAnim=$(".down-anim"),$contactImg=$(".contact-img"),$contactSubInside=$(".contact-sub-inside"),$contactSubLink=$contactSubInside.parent(),$contactSub=$contactSubLink.parent(),prices={purchase:[18,33,46,57],subscribe:[15,28,39,48],merch:[20,12,20,20]},addresses=["6147 Lakeside Dr #102, Reno, NV 89502"],contactObj={instagram:{text:"instagram.com/cafejefellc",link:"http://www.instagram.com/cafejefellc"},address:{text:"6147 Lakeside Dr #102, Reno, NV 89502",link:""},facebook:{text:"facebook.com/CafeJefeLLC",link:"http://www.facebook.com/cafejefellc"},phone:{text:"(571)238-8256",link:""},email:{text:"julian@cafejefe.com",link:"julian@cafejefe.com"}},main=function(){var a=$(".active-purch-type").attr("id"),b=0;$coffeePrice.each(function(){$(this).html("$"+prices[a][b]),b++}),b=0,$merchPrice.each(function(){$(this).html("$"+prices.merch[b]),b++}),$purchaseToggle.click(function(){$(this).hasClass("active-purch-type")||($purchaseToggle.each(function(){$(this).toggleClass("active-purch-type")}),a=$(this).attr("id"),$(".button-text").html(a.slice(0,1).toUpperCase()+a.slice(1)),b=0,$coffeePrice.each(function(){$(this).html("$"+prices[a][b]),b++}),$buyBtn.each(function(){var b=$(this).attr("href").slice(0,$(this).attr("href").lastIndexOf("-")+1);$(this).attr("href",b+a)}))}),$coffeeInd.click(function(){$(this).hasClass("active-coffee-amount")||($(".active-coffee-amount").toggleClass("active-coffee-amount"),$(this).children(".coffee-ind-inside").toggleClass("active-coffee-amount"))}),$landingTogglers.click(function(){var a,b;$(this).hasClass("landing-active")||($landingHead.hasClass("fade-out")?($startLandingActive=$(".landing-active"),$startLandingActive.toggleClass("landing-active"),$startLandingActive.children(".full").toggleClass("show"),$(this).toggleClass("landing-active"),b=this,a=$(".landing-img").not(".show"),$(".landing-img.show").toggleClass("show"),setTimeout(function(){$(b).children(".full").toggleClass("show"),a.toggleClass("show")},500)):($landingHead.addClass("fade-out"),$(this).toggleClass("landing-active"),b=this,$(this).hasClass("dream")?(a=$(".landing-img").not(".show"),$(".landing-img.show").toggleClass("show"),setTimeout(function(){$(b).children(".full").toggleClass("show"),a.toggleClass("show")},500)):setTimeout(function(){$(b).children(".full").toggleClass("show")},400)))}),$downAnim.click(function(){$("html, body").animate({scrollTop:titleTop},titleTop-.8*$(window).scrollTop())}),$backToTop.click(function(){$("html, body").animate({scrollTop:0},.65*$(window).scrollTop())}),$contactImg.mouseenter(function(){var a=$(this).attr("class").split(" ")[1];$contactSubInside.text()!==contactObj[a].text&&($contactSubLink.attr("href",contactObj[a].link),!!contactObj[a].link===$contactSubLink.hasClass("disable-link")&&$contactSubLink.toggleClass("disable-link"),$contactSub.animate({opacity:0},300,"swing",function(){$contactSubInside.text(contactObj[a].text)}).animate({opacity:1},300,"swing"))})},mapLoad=function(a){$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?address="+a[0]+"&sensor=false",null,function(b){var c,d=b.results[0].geometry.location,e={center:new google.maps.LatLng(d.lat,d.lng),mapTypeId:google.maps.MapTypeId.TERRAIN,styles:[{stylers:[{saturation:-100},{lightness:0},{gamma:.5}]}],zoom:15,scrollwheel:!1,draggable:!0};c=new google.maps.Map($("#map")[0],e);var f=new google.maps.LatLngBounds;a.forEach(function(a,b){$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?address="+a+"&sensor=false",null,function(d){var e=d.results[0].geometry.location,g=new google.maps.LatLng(e.lat,e.lng);f.extend(g);var h=new google.maps.Marker({position:g,map:c,icon:"images/Marker_Mask.png"}),i=new google.maps.InfoWindow({content:'<p class="marker-caption">'+a+"</p>"});google.maps.event.addListener(h,"click",function(){i.open(c,h)}),google.maps.event.addListener(i,"closeclick",function(){c.setCenter(h.getPosition())}),b>0&&c.fitBounds(f)})})})},titleTop=Math.ceil($title.offset().top),contactTop=.92*Math.ceil($contact.offset().top),downAnimReached=.395*titleTop+4.5,listeners=function(){var a=0,b=!1,c=!1,d=!0,e=!1,f=function(){a=window.pageYOffset,(a>=titleTop&&!b||titleTop>a&&b)&&($title.toggleClass("sticky"),$placeHolder.toggleClass("no-show"),b=!b),(a>=contactTop&&!e||contactTop>a&&e)&&($contact.toggleClass("poppin"),e=!e),(a>=downAnimReached&&!c||downAnimReached>a&&c)&&($landingHead.toggleClass("dim"),c=!c),downAnimReached>a&&!d&&(d=!0),0===a?$landingNotHead.add($downAnim).css("opacity",1):a>=downAnimReached&&d?$landingNotHead.add($downAnim).css("opacity",+(d=!1)):a>0&&downAnimReached>a&&$landingNotHead.add($downAnim).css("opacity",1-a/downAnimReached)};f(),$(window).resize(function(){console.log(titleTop),titleTop=Math.ceil($title.offset().top),downAnimReached=.395*titleTop+4.5,f()}),window.addEventListener("scroll",f)};$(document).ready(main,mapLoad(addresses),listeners());