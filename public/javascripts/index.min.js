/*! cafeJefe 2015-07-21 */
var $purchaseToggle=$(".purchase-toggle"),$coffeeInd=$(".coffee-ind"),$buyBtn=$(".buy-btn"),$coffeePrice=$(".coffee-price"),$merchPrice=$(".merch-price"),$backToTop=$(".back-to-top, .title, .footer-logo"),$title=$(".title"),$contact=$(".contact"),$placeHolder=$(".place-holder"),$landingHead=$(".landing-head"),$landingNotHead=$(".landing-not-head"),$landingTogglers=$(".dream, .product"),$downAnim=$(".down-anim"),$contactImg=$(".contact-img"),$contactSubInside=$(".contact-sub-inside"),$contactSubLink=$contactSubInside.parent(),$contactSub=$contactSubLink.parent(),prices={purchase:[18,33,46,57],subscribe:[15,28,39,48],merch:[20,12,20,20]},addresses=["6147 Lakeside Dr #102, Reno, NV 89502"],contactObj={instagram:{text:"instagram.com/CafeJefeLLC",link:"http://www.instagram.com/cafejefellc"},address:{text:"6147 Lakeside Dr #102, Reno, NV 89502",link:"https://www.google.com/maps/place/Pedalers+Deli/@39.471266,-119.8087336,17z/data=!3m1!4b1!4m2!3m1!1s0x80994014c55a99eb:0xcf7d2a91ee0370be"},facebook:{text:"facebook.com/CafeJefeLLC",link:"http://www.facebook.com/cafejefellc"},phone:{text:"(775) 499-5134",link:"tel:+17754995134"},email:{text:"julian@CafeJefe.com",link:"mailto:julian@cafejefe.com"}},main=function(){var purchTypeVal=$(".active-purch-type").attr("id"),inc=0;$coffeePrice.each(function(){$(this).html("$"+prices[purchTypeVal][inc]),inc++}),inc=0,$merchPrice.each(function(){$(this).html("$"+prices.merch[inc]),inc++}),$purchaseToggle.click(function(){$(this).hasClass("active-purch-type")||($purchaseToggle.each(function(){$(this).toggleClass("active-purch-type")}),purchTypeVal=$(this).attr("id"),$(".button-text").html(purchTypeVal.slice(0,1).toUpperCase()+purchTypeVal.slice(1)),inc=0,$coffeePrice.each(function(){$(this).html("$"+prices[purchTypeVal][inc]),inc++}),$buyBtn.each(function(){var currVal=$(this).attr("href").slice(0,$(this).attr("href").lastIndexOf("-")+1);$(this).attr("href",currVal+purchTypeVal)}))}),$coffeeInd.click(function(){$(this).hasClass("active-coffee-amount")||($(".active-coffee-amount").toggleClass("active-coffee-amount"),$(this).children(".coffee-ind-inside").toggleClass("active-coffee-amount"))}),$landingTogglers.click(function(){var notSelImg,tempThis;$(this).hasClass("landing-active")||($landingHead.hasClass("fade-out")?($startLandingActive=$(".landing-active"),$startLandingActive.toggleClass("landing-active"),$startLandingActive.children(".full").toggleClass("show"),$(this).toggleClass("landing-active"),tempThis=this,notSelImg=$(".landing-img").not(".show"),$(".landing-img.show").toggleClass("show"),setTimeout(function(){$(tempThis).children(".full").toggleClass("show"),notSelImg.toggleClass("show")},500)):($landingHead.addClass("fade-out"),$(this).toggleClass("landing-active"),tempThis=this,$(this).hasClass("dream")?(notSelImg=$(".landing-img").not(".show"),$(".landing-img.show").toggleClass("show"),setTimeout(function(){$(tempThis).children(".full").toggleClass("show"),notSelImg.toggleClass("show")},500)):setTimeout(function(){$(tempThis).children(".full").toggleClass("show")},400)))}),$downAnim.click(function(){$("html, body").animate({scrollTop:titleTop},titleTop-.8*$(window).scrollTop())}),$backToTop.click(function(){$("html, body").animate({scrollTop:0},.65*$(window).scrollTop())}),$contactImg.mouseenter(function(){var selected=$(this).attr("class").split(" ")[1];$contactSubInside.text()!==contactObj[selected].text&&($contactSubLink.attr("href",contactObj[selected].link),!!contactObj[selected].link===$contactSubLink.hasClass("disable-link")&&$contactSubLink.toggleClass("disable-link"),$contactSub.animate({opacity:0},300,"swing",function(){$contactSubInside.text(contactObj[selected].text)}).animate({opacity:1},300,"swing"))})},mapLoad=function(addresses){$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?address="+addresses[0]+"&sensor=false",null,function(centerData){var map,centerCoord=centerData.results[0].geometry.location,mapOptions={center:new google.maps.LatLng(centerCoord.lat,centerCoord.lng),mapTypeId:google.maps.MapTypeId.TERRAIN,styles:[{stylers:[{saturation:-100},{lightness:0},{gamma:.5}]}],zoom:15,scrollwheel:!1,draggable:!0};map=new google.maps.Map($("#map")[0],mapOptions);var bounds=new google.maps.LatLngBounds;addresses.forEach(function(val,index){$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?address="+val+"&sensor=false",null,function(data){var p=data.results[0].geometry.location,latlng=new google.maps.LatLng(p.lat,p.lng);bounds.extend(latlng);var marker=new google.maps.Marker({position:latlng,map:map,icon:"images/Marker_Mask.png"}),infowindow=new google.maps.InfoWindow({content:'<p class="marker-caption">'+val+"</p>"});google.maps.event.addListener(marker,"click",function(){infowindow.open(map,marker)}),google.maps.event.addListener(infowindow,"closeclick",function(){map.setCenter(marker.getPosition())}),index>0&&map.fitBounds(bounds)})})})},titleTop=Math.ceil($title.offset().top),contactTop=.92*Math.ceil($contact.offset().top),downAnimReached=.395*titleTop+4.5,listeners=function(){var pagePos=0,titleFixed=!1,landingHeadDimmed=!1,topTextShowing=!0,contactPopped=!1,landingScroll=function(){pagePos=window.pageYOffset,(pagePos>=titleTop&&!titleFixed||titleTop>pagePos&&titleFixed)&&($title.toggleClass("sticky"),$placeHolder.toggleClass("no-show"),titleFixed=!titleFixed),(pagePos>=contactTop&&!contactPopped||contactTop>pagePos&&contactPopped)&&($contact.toggleClass("poppin"),contactPopped=!contactPopped),(pagePos>=downAnimReached&&!landingHeadDimmed||downAnimReached>pagePos&&landingHeadDimmed)&&($landingHead.toggleClass("dim"),landingHeadDimmed=!landingHeadDimmed),downAnimReached>pagePos&&!topTextShowing&&(topTextShowing=!0),0===pagePos?$landingNotHead.add($downAnim).css("opacity",1):pagePos>=downAnimReached&&topTextShowing?$landingNotHead.add($downAnim).css("opacity",+(topTextShowing=!1)):pagePos>0&&downAnimReached>pagePos&&$landingNotHead.add($downAnim).css("opacity",1-pagePos/downAnimReached)};landingScroll(),$(window).resize(function(){titleTop=Math.ceil($title.offset().top),downAnimReached=.395*titleTop+4.5,landingScroll()}),window.addEventListener("scroll",landingScroll)};$(document).ready(main,mapLoad(addresses),listeners());